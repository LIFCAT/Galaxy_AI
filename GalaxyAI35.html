<!DOCTYPE html>
<html>
<head>
<title>Galaxy AI</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#000;color:#fff;min-height:100vh;position:relative}.theme-default{background:#000}.theme-red{background:#2a0f0f}.theme-orange{background:#2a1a0f}.theme-gray{background:#1a1a1a}.theme-purple{background:#1a0f2a}.theme-blue{background:#0f1a2a}.stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1}.star{position:absolute;background:#fff;border-radius:50%}.container{max-width:420px;margin:0 auto;padding:15px;height:100vh;display:flex;flex-direction:column}.menu-button{position:absolute;top:15px;right:15px;background:rgba(100,100,100,0.8);color:#fff;border:none;border-radius:8px;padding:8px 10px;cursor:pointer;z-index:1000}.menu-panel{position:absolute;top:50px;right:15px;background:rgba(60,60,60,0.95);border-radius:12px;padding:15px;width:200px;display:none;z-index:999;border:1px solid rgba(255,255,255,0.2)}.menu-option{background:rgba(80,80,80,0.7);color:#fff;border:none;border-radius:8px;padding:10px;margin:5px 0;cursor:pointer;width:100%;text-align:left}.menu-option.active{background:rgba(0,136,204,0.7);border:1px solid #08c}.theme-option{width:20px;height:20px;border-radius:50%;display:inline-block;margin-right:8px;border:2px solid transparent}.theme-option.active{border-color:#fff}.api-input{width:100%;padding:8px;margin:5px 0;background:rgba(40,40,40,0.8);color:#fff;border:1px solid #555;border-radius:6px;font-size:12px}.header{text-align:right;margin-bottom:5px;padding-top:50px;padding-right:10px}.header h1{color:#fff;font-size:22px;margin-bottom:2px}.header p{color:#888;font-size:13px}.ai-status{color:rgba(102,102,102,0.8);font-size:11px;text-align:left;margin-bottom:8px;margin-left:10px;height:15px;animation:pulse 2s infinite}@keyframes pulse{0%,100%{opacity:0.7}50%{opacity:0.4}}#chat{flex:1;overflow-y:auto;margin-bottom:70px;padding:15px;background:rgba(255,255,255,0.05);border-radius:12px;border:1px solid rgba(255,255,255,0.1);min-height:300px}.message{max-width:85%;margin:12px 0;padding:12px 16px;border-radius:18px;word-wrap:break-word;line-height:1.4}.user-message{background:#2b5278;margin-left:auto;border-bottom-right-radius:5px}.bot-message{background:#182533;margin-right:auto;border-bottom-left-radius:5px}.message-time{font-size:10px;color:#888;margin-top:5px;text-align:right}.bot-message .message-time{text-align:left}.input-group{display:flex;gap:10px;margin-top:10px;position:relative}#userInput{flex:1;padding:14px;border:2px solid #333;border-radius:25px;background:#1e1e1e;color:#fff;font-size:16px}#sendButton{padding:14px 22px;background:#08c;color:#fff;border:none;border-radius:25px;cursor:pointer;font-weight:bold}.clear-history{position:absolute;top:15px;left:15px;background:rgba(255,0,0,0.3);color:#fff;border:none;border-radius:8px;padding:8px 12px;font-size:11px;cursor:pointer;z-index:10}.mode-indicator{position:absolute;top:50px;left:15px;background:rgba(0,100,0,0.3);color:#0f0;padding:6px 10px;border-radius:8px;font-size:10px}.version{position:absolute;bottom:8px;right:15px;color:#666;font-size:10px}.submenu{display:none;margin-top:10px}.quick-replies{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;margin-bottom:10px;justify-content:center}.quick-reply{background:rgba(0,136,204,0.3);color:#fff;border:1px solid #0088cc;border-radius:15px;padding:8px 12px;font-size:12px;cursor:pointer;transition:all 0.3s}.quick-reply:hover{background:rgba(0,136,204,0.5)}.quick-menu{background:rgba(0,136,204,0.5);color:#fff;border:2px solid #0088cc;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;position:absolute;left:15px;bottom:75px;transition:all 0.3s}.quick-menu:hover{background:rgba(0,136,204,0.7);transform:scale(1.1)}
</style>
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º TensorFlow.js –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ò–ò -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3"></script>
</head>
<body class=theme-default>
<div class=stars id=stars></div>
<button class=menu-button onclick=toggleMenu()>‚ò∞</button>
<div class=menu-panel id=menuPanel>
<button class=menu-option onclick=toggleSubmenu('ai')>ü§ñ –í—ã–±–æ—Ä –ò–ò</button>
<div class=submenu id=aiSubmenu>
<button class="menu-option active" onclick=setMode('galaxy')>üöÄ Galaxy AI</button>
<button class=menu-option onclick=setMode('yandex')>üî∑ Yandex GPT</button>
<button class=menu-option onclick=setMode('openai')>üî∂ OpenAI GPT</button>
<button class=menu-option onclick=setMode('google')>üîµ Google AI</button>
<button class=menu-option onclick=setMode('grok')>üü£ Grok AI</button>
<input type=password class=api-input placeholder="API –∫–ª—é—á">
</div>
<button class=menu-option onclick=toggleSubmenu('theme')>üé® –í—ã–±–æ—Ä —Ç–µ–º—ã</button>
<div class=submenu id=themeSubmenu>
<button class=menu-option onclick=setTheme('default')><span class="theme-option active" style=background:#000></span> –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è</button>
<button class=menu-option onclick=setTheme('red')><span class=theme-option style=background:#2a0f0f></span> –ö—Ä–∞—Å–Ω–∞—è</button>
<button class=menu-option onclick=setTheme('orange')><span class=theme-option style=background:#2a1a0f></span> –û—Ä–∞–Ω–∂–µ–≤–∞—è</button>
<button class=menu-option onclick=setTheme('gray')><span class=theme-option style=background:#1a1a1a></span> –°–µ—Ä–∞—è</button>
<button class=menu-option onclick=setTheme('purple')><span class=theme-option style=background:#1a0f2a></span> –§–∏–æ–ª–µ—Ç–æ–≤–∞—è</button>
<button class=menu-option onclick=setTheme('blue')><span class=theme-option style=background:#0f1a2a></span> –°–∏–Ω—è—è</button>
</div>
<div style=color:#888;font-size:10px;margin-top:5px>Galaxy AI - —É–º–Ω—ã–π –ò–ò –ø–æ–º–æ—â–Ω–∏–∫</div>
</div>
<button class=clear-history onclick=clearHistory()>–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
<div class=mode-indicator id=modeIndicator>üöÄ Galaxy AI</div>
<div class=version>v0.3.0</div>
<div class=container>
<div class=header>
<h1>Galaxy AI</h1>
<p>–£–º–Ω—ã–π –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫</p>
</div>
<div class="ai-status" id=aiStatus>AI: –ì–æ—Ç–æ–≤</div>
<div id=chat></div>
<div class=quick-replies id=quickReplies style=display:none>
<div class=quick-reply onclick="insertQuickReply('–ü—Ä–∏–≤–µ—Ç! üëã')">–ü—Ä–∏–≤–µ—Ç</div>
<div class=quick-reply onclick="insertQuickReply('–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º—è?')">–í—Ä–µ–º—è</div>
<div class=quick-reply onclick="insertQuickReply('–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ iPhone')">iPhone</div>
<div class=quick-reply onclick="insertQuickReply('–ß—Ç–æ –ª—É—á—à–µ PS5 –∏–ª–∏ Xbox?')">PS5 vs Xbox</div>
<div class=quick-reply onclick="insertQuickReply('–°–∞–º—Å—É–Ω–≥ –∏–ª–∏ –≠–ø–ø–ª?')">Samsung vs Apple</div>
<div class=quick-reply onclick="insertQuickReply('–ù–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏')">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</div>
<div class=quick-reply onclick="insertQuickReply('–ò–≥—Ä—ã 2024')">–ò–≥—Ä—ã</div>
<div class=quick-reply onclick="insertQuickReply('–ß—Ç–æ —è —Å–ø—Ä–∞—à–∏–≤–∞–ª –≤ –ø—Ä–æ—à–ª–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏?')">–ü—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–ø—Ä–æ—Å</div>
</div>
<div class=quick-menu onclick=toggleQuickReplies()>+</div>
<div class=input-group>
<input type=text id=userInput placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ò–ò..." autocomplete=off>
<button id=sendButton>üöÄ</button>
</div>
</div>
<script>
let currentMode='galaxy',currentTheme='default',knowledgeBase={},commandDB={},lastQuestion=''
let aiModel = null;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ò–ò
async function initLocalAI() {
    try {
        updateAIStatus("–ó–∞–≥—Ä—É–∂–∞—é –ò–ò...");
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        aiModel = await universalSentenceEncoder.load();
        updateAIStatus("–ò–ò –≥–æ—Ç–æ–≤");
        return true;
    } catch (error) {
        updateAIStatus("–õ–æ–∫–∞–ª—å–Ω—ã–π –ò–ò –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");
        return false;
    }
}

function initDB(){
    commandDB={
        pr:'–ü—Ä–∏–≤–µ—Ç! üëã –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!',
        priv:'–•–∞–π –±—Ä–æ! üëã –ö–∞–∫ –¥–µ–ª–∞?',
        vrem:`‚è∞ ${new Date().toLocaleTimeString('ru-RU')}`,
        dat:`üìÖ ${new Date().toLocaleDateString('ru-RU')}`,
        shut:getRandomJoke(),
        kaknaz:'Galaxy AI - —É–º–Ω—ã–π –ò–ò –ø–æ–º–æ—â–Ω–∏–∫! üåå'
    },
    knowledgeBase={
        iph:'üì± iPhone 15 Pro: A17 Pro, —Ç–∏—Ç–∞–Ω–æ–≤—ã–π –∫–æ—Ä–ø—É—Å, 48–ú–ü –∫–∞–º–µ—Ä–∞',
        sam:'üì± Samsung S24 Ultra: Snapdragon 8 Gen 3, S-Pen, 200–ú–ü –∫–∞–º–µ—Ä–∞',
        ps5:'üéÆ PS5: 4K 120fps, SSD, DualSense, —ç–∫—Å–∫–ª—é–∑–∏–≤—ã',
        xbox:'üéÆ Xbox Series X: 12 TFLOPS, Quick Resume, Game Pass'
    }
}

function createStars(){
    const e=document.getElementById("stars");
    for(let t=0;t<60;t++){
        const a=document.createElement("div");
        a.className="star",
        a.style.width=`${2*Math.random()+1}px`,
        a.style.height=a.style.width,
        a.style.left=`${100*Math.random()}%`,
        a.style.top=`${100*Math.random()}%`,
        a.style.opacity=.6*Math.random()+.2,
        e.appendChild(a)
    }
}

function toggleMenu(){
    const e=document.getElementById("menuPanel");
    e.style.display="block"===e.style.display?"none":"block",
    hideSubmenus()
}

function toggleSubmenu(e){
    const t=document.getElementById(e+"Submenu");
    t.style.display="none"===t.style.display?"block":"none"
}

function hideSubmenus(){
    document.querySelectorAll(".submenu").forEach(e=>{e.style.display="none"})
}

function setMode(e){
    currentMode=e,
    document.querySelectorAll(".menu-option").forEach(e=>e.classList.remove("active")),
    event.target.classList.add("active"),
    document.getElementById("modeIndicator").textContent=
        "galaxy"===e?"üöÄ Galaxy AI":
        "yandex"===e?"üî∑ Yandex GPT":
        "openai"===e?"üî∂ OpenAI GPT":
        "google"===e?"üîµ Google AI":
        "üü£ Grok AI",
    hideMenu(),
    updateAIStatus("–ì–æ—Ç–æ–≤")
}

function setTheme(e){
    currentTheme=e,
    document.body.className=`theme-${e}`,
    document.querySelectorAll(".theme-option").forEach(e=>e.classList.remove("active")),
    event.target.querySelector(".theme-option").classList.add("active"),
    hideMenu()
}

function hideMenu(){
    document.getElementById("menuPanel").style.display="none",
    hideSubmenus()
}

function updateAIStatus(e){
    const a=document.getElementById("aiStatus");
    a.textContent=`AI: ${e}`
}

function getCurrentTime(){
    return new Date().toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})
}

function saveToHistory(e,t){
    let a=JSON.parse(localStorage.getItem("galaxyAIHistory"))||[];
    a.push({user:e,bot:t,time:getCurrentTime()}),
    localStorage.setItem("galaxyAIHistory",JSON.stringify(a))
}

function loadHistory(){
    const e=JSON.parse(localStorage.getItem("galaxyAIHistory"))||[],
    t=document.getElementById("chat");
    t.innerHTML="",
    0===e.length?(
        addMessage("bot","–ü—Ä–∏–≤–µ—Ç! –Ø Galaxy - —Ç–≤–æ–π –ò–ò –ø–æ–º–æ—â–Ω–∏–∫ ü§ñ\n\n–ú–æ–≥—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –≤ –±—É–¥—É—â–µ–º –¥–∞–∂–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.\n\n–° —á–µ–≥–æ –Ω–∞—á–Ω–µ–º? ü§î",getCurrentTime()),
        void 0
    ):(
        e.forEach(e=>{
            addMessage("user",e.user,e.time),
            addMessage("bot",e.bot,e.time)
        }),
        scrollToBottom()
    )
}

function clearHistory(){
    confirm("–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é?")&&(
        localStorage.removeItem("galaxyAIHistory"),
        loadHistory()
    )
}

function addMessage(e,t,a){
    const l=document.getElementById("chat"),
    o=document.createElement("div");
    o.className=`message ${e}-message`,
    o.innerHTML=`<div>${t}</div><div class=message-time>${a}</div>`,
    l.appendChild(o),
    scrollToBottom()
}

function scrollToBottom(){
    const e=document.getElementById("chat");
    e.scrollTop=e.scrollHeight
}

function getRandomJoke(){
    const e=[
        "üòÇ –ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –º—ë—Ä–∑–Ω–µ—Ç? Windows –æ—Ç–∫—Ä—ã—Ç!",
        "üíª –ß—Ç–æ —Å–∫–∞–∑–∞–ª –±–∏—Ç –¥—Ä—É–≥–æ–º—É? –í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –Ω–∞ –≤—ã—Ö–æ–¥–µ!"
    ];
    return e[Math.floor(Math.random()*e.length)]
}

function toggleQuickReplies(){
    const e=document.getElementById("quickReplies");
    e.style.display="none"===e.style.display?"flex":"none"
}

// ‚ö° –£–ú–ù–´–ô –õ–û–ö–ê–õ–¨–ù–´–ô –ò–ò –ë–ï–ó API
async function getAIResponse(userMessage) {
    if (currentMode !== 'galaxy') {
        const command = checkCommands(userMessage);
        if (command) return command;
        const knowledge = searchKnowledge(userMessage);
        if (knowledge) return knowledge;
        return getSmartResponse(userMessage);
    }
    
    // –õ–û–ö–ê–õ–¨–ù–´–ô –ò–ò –° –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–´–ú–ò –û–¢–í–ï–¢–ê–ú–ò
    const lowerMessage = userMessage.toLowerCase();
    
    // –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã
    const intelligentResponses = {
        // –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
        '–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç': 'ü§ñ –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç - —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—à–∏–Ω–∞–º –æ–±—É—á–∞—Ç—å—Å—è –∏ —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫. –°–µ–π—á–∞—Å –ò–ò –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –ø–æ–º–æ—â–Ω–∏–∫–∞—Ö, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö.',
        '–Ω–µ–π—Ä–æ—Å–µ—Ç—å': 'üß† –ù–µ–π—Ä–æ—Å–µ—Ç—å - —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–æ–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –º–æ–∑–≥–∞. –û–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ–π—Ä–æ–Ω–æ–≤ –∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –Ω–∏–º–∏, —Å–ø–æ—Å–æ–±–Ω–∞ –æ–±—É—á–∞—Ç—å—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã—Ö.',
        '—á–∞—Ç–±–æ—Ç': 'üí¨ –ß–∞—Ç–±–æ—Ç - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±—â–∞–µ—Ç—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∞—Ç–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ò–ò –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤.',
        
        // –ù–∞—É–∫–∞
        '–∫–æ—Å–º–æ—Å': 'üåå –ö–æ—Å–º–æ—Å - —ç—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ó–µ–º–ª–∏. –¢–∞–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∑–≤–µ–∑–¥—ã, –ø–ª–∞–Ω–µ—Ç—ã, –≥–∞–ª–∞–∫—Ç–∏–∫–∏ –∏ —á–µ—Ä–Ω—ã–µ –¥—ã—Ä—ã. –ß–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∫–æ—Å–º–æ—Å!',
        '–∫–≤–∞–Ω—Ç': '‚öõÔ∏è –ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞ –∏–∑—É—á–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ–ª—å—á–∞–π—à–∏—Ö —á–∞—Å—Ç–∏—Ü. –í –∫–≤–∞–Ω—Ç–æ–≤–æ–º –º–∏—Ä–µ —á–∞—Å—Ç–∏—Ü—ã –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Å—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è).',
        
        // –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
        '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ': 'üíª –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —è–∑—ã–∫–∏: Python, JavaScript, Java. –ö–∞–∂–¥—ã–π —è–∑—ã–∫ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á.',
        'html': 'üåê HTML - —è–∑—ã–∫ —Ä–∞–∑–º–µ—Ç–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–æ–≤ –≤—Ä–æ–¥–µ <div>, <p>, <h1>.',
        'javascript': 'üìú JavaScript - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å —Å–∞–π—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏, –¥–æ–±–∞–≤–ª—è—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏.',
        
        // –û–±—â–∏–µ –∑–Ω–∞–Ω–∏—è
        '–ø–æ–≥–æ–¥–∞': 'üå§Ô∏è –ü–æ–≥–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–Ω–æ–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤: –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å. –î–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.',
        '–≤—Ä–µ–º—è': `‚è∞ –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è: ${new Date().toLocaleTimeString('ru-RU')}. –í —Ä–∞–∑–Ω—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö –≤—Ä–µ–º—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.`,
        '–¥–∞—Ç–∞': `üìÖ –°–µ–≥–æ–¥–Ω—è: ${new Date().toLocaleDateString('ru-RU', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`,
        
        // –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
        '—Å–º—ã—Å–ª –∂–∏–∑–Ω–∏': 'ü§î –°–º—ã—Å–ª –∂–∏–∑–Ω–∏ - –≥–ª—É–±–æ–∫–∏–π —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å. –ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–º—ã—Å–ª —á–µ—Ä–µ–∑ –ª—é–±–æ–≤—å, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –∑–Ω–∞–Ω–∏—è –∏–ª–∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º.',
        '–±—É–¥—É—â–µ–µ': 'üöÄ –ë—É–¥—É—â–µ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å–µ–≥–æ–¥–Ω—è. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ: –ò–ò, –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è, –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º–µ–Ω—è—é—Ç –Ω–∞—à –º–∏—Ä.',
        
        // –û–±—É—á–µ–Ω–∏–µ
        '—É—á–∏—Ç—å—Å—è': 'üìö –£—á–∏—Ç—å—Å—è - –∑–Ω–∞—á–∏—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è. –õ—É—á—à–∏–µ —Å–ø–æ—Å–æ–±—ã: –ø—Ä–∞–∫—Ç–∏–∫–∞, —á—Ç–µ–Ω–∏–µ, –∫—É—Ä—Å—ã –∏ –æ–±—â–µ–Ω–∏–µ —Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏. –ù–µ –±–æ–π—Å—è –¥–µ–ª–∞—Ç—å –æ—à–∏–±–∫–∏!',
        '–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': 'üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞—Ç—å —Ü–µ–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏. –°–µ–≥–æ–¥–Ω—è –º–æ–∂–Ω–æ —É—á–∏—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω –±–µ—Å–ø–ª–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ –∫—É—Ä—Å—ã –∏ YouTube.',
    };
    
    // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
    for (const [key, response] of Object.entries(intelligentResponses)) {
        if (lowerMessage.includes(key)) {
            return response;
        }
    }
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    if (lowerMessage.includes('?')) {
        const contextResponses = [
            `üß† –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ "${userMessage}". –≠—Ç–æ —Å–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞, —Ç—Ä–µ–±—É—é—â–∞—è –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–∏—Å–∫–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.`,
            `üí≠ –ù–∞–¥ –≤–æ–ø—Ä–æ—Å–æ–º "${userMessage}" —Ä–∞–∑–º—ã—à–ª—è—é—Ç –º–Ω–æ–≥–∏–µ —É—á–µ–Ω—ã–µ –∏ —Ñ–∏–ª–æ—Å–æ—Ñ—ã. –£ –∫–∞–∂–¥–æ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ–π –≤–∑–≥–ª—è–¥ –Ω–∞ —ç—Ç—É —Ç–µ–º—É.`,
            `üìö –í–æ–ø—Ä–æ—Å "${userMessage}" –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –≤–∞–∂–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è.`,
            `üåå "${userMessage}" - —ç—Ç–æ —Ç–µ–º–∞ –¥–ª—è —Å–µ—Ä—å–µ–∑–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞—É–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.`,
            `ü§ñ –ö–∞–∫ –ò–ò, —è –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤–æ–ø—Ä–æ—Å "${userMessage}" —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∏ —É—á–µ—Ç–∞ –º–Ω–æ–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤.`
        ];
        return contextResponses[Math.floor(Math.random() * contextResponses.length)];
    }
    
    // –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    const smartReplies = [
        `üí° –ü–æ —Ç–µ–º–µ "${userMessage}" –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ. –≠—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ.`,
        `üöÄ "${userMessage}" - –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å! –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–ª—É—á—à–∞—é—Ç—Å—è.`,
        `üìà "${userMessage}" –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω–æ. –ú–Ω–æ–≥–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ä—É—é—Ç –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ —ç—Ç–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.`,
        `üî¨ –ù–∞—É–∫–∞ –∏–∑—É—á–∞–µ—Ç "${userMessage}" —É–∂–µ –º–Ω–æ–≥–æ –ª–µ—Ç. –ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è.`,
        `üåç "${userMessage}" –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—à—É –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—É—é –∂–∏–∑–Ω—å –±–æ–ª—å—à–µ, —á–µ–º –º—ã –¥—É–º–∞–µ–º.`
    ];
    
    return smartReplies[Math.floor(Math.random() * smartReplies.length)];
}

function checkCommands(e){
    const t=e.toLowerCase();
    if("lifcat"===t)return"üî• LIFCAT - –∫—Ä—É—Ç–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫! üòé";
    if(/(—Å–∞–º—Å—É–Ω–≥ –ø—Ä–æ—Ç–∏–≤ –∞–π—Ñ–æ–Ω|—Å–∞–º—Å—É–Ω–≥ vs –∞–π—Ñ–æ–Ω)/i.test(t))return`‚ö° iPhone vs Samsung\n\nüçé iPhone: –ø–ª–∞–≤–Ω–æ—Å—Ç—å, —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞\nüì± Samsung: —Å–≤–æ–±–æ–¥–∞, S-Pen\n\n–í—ã–±–∏—Ä–∞–π —Å–µ—Ä–¥—Ü–µ–º! üíô`;
    if(/(–ø—Å5 –ø—Ä–æ—Ç–∏–≤ xbox|ps5 vs xbox)/i.test(t))return`üéÆ PS5 vs Xbox Series X\n\nüéØ PS5: —ç–∫—Å–∫–ª—é–∑–∏–≤—ã, DualSense\nüü¢ Xbox: Game Pass, –º–æ—â–Ω–æ—Å—Ç—å\n\n–û–±–∞ –æ—Ç–ª–∏—á–Ω—ã! üí™`;
    for(const[a,l]of Object.entries(commandDB))if(t.includes(a))return"shut"===a?getRandomJoke():l;
    if(/(\d+[\+\-\*\/]\d+)|—Å–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç/i.test(e))try{
        const t=e.match(/(\d+)\s*([\+\-\*\/])\s*(\d+)/);
        if(t){
            const a=parseInt(t[1]),l=parseInt(t[3]),o=t[2];
            let n;
            switch(o){
                case"+":n=a+l;break;
                case"-":n=a-l;break;
                case"*":n=a*l;break;
                case"/":n=0!==l?(a/l).toFixed(2):"–ù–∞ –Ω–æ–ª—å –¥–µ–ª–∏—Ç—å –Ω–µ–ª—å–∑—è!";break;
                default:n="?"
            }
            return`üî¢ ${a} ${o} ${l} = ${n}`
        }
    }catch(e){}
    return null
}

function searchKnowledge(e){
    const t=e.toLowerCase();
    for(const[a,l]of Object.entries(knowledgeBase))if(t.includes(a))return l;
    return null
}

function getSmartResponse(e){
    const t=e.toLowerCase();
    if(t.includes("—á—Ç–æ —è —Å–ø—Ä–∞—à–∏–≤–∞–ª")||t.includes("–ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–ø—Ä–æ—Å"))return lastQuestion?`–¢—ã —Å–ø—Ä–∞—à–∏–≤–∞–ª: "${lastQuestion}"`:"–≠—Ç–æ —Ç–≤–æ–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ! üëã";
    if(t.includes("–≤—Ä–µ–º")&&!t.includes("–ø—Ä–æ—à–ª"))return`‚è∞ ${new Date().toLocaleTimeString('ru-RU')}`;
    if(t.includes("–ø—Ä–∏–≤–µ—Ç"))return"–ü—Ä–∏–≤–µ—Ç! üëã –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!";
    if(t.includes("—Ç–µ—Ö–Ω–æ–ª–æ–≥"))return"ü§ñ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: –ò–ò, VR, —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã!";
    const a=[
        "ü§î –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–π-–∫–∞ –ø–æ–¥—É–º–∞—Ç—å...",
        "üß† –ù–∞–¥ —ç—Ç–∏–º —Å—Ç–æ–∏—Ç –ø–æ—Ä–∞–∑–º—ã—à–ª—è—Ç—å!",
        "üí≠ –•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –ß—Ç–æ –¥—É–º–∞–µ—à—å —Å–∞–º?",
        "üöÄ –ó–∞–¥—É–º–∞–ª—Å—è –Ω–∞–¥ —Ç–≤–æ–∏–º –≤–æ–ø—Ä–æ—Å–æ–º!",
        "üåå –ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è!",
        "üìö –ù–∞—É–∫–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è...",
        "üí° –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º —ç—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ!"
    ];
    return a[Math.floor(Math.random()*a.length)]
}

function calculateResponseTime(e){
    return 2000 + Math.random() * 2000; // 2-4 —Å–µ–∫—É–Ω–¥—ã
}

async function sendMessage(){
    const e=document.getElementById("userInput"),
    t=e.value.trim();
    if(!t)return;
    const a=getCurrentTime();
    addMessage("user",t,a),
    e.value="",
    updateAIStatus("–î—É–º–∞–µ—Ç");
    
    const l=calculateResponseTime(t);
    
    setTimeout(async()=>{
        let response;
        if(currentMode === 'galaxy') {
            response = await getAIResponse(t);
        } else {
            response = "üîë –í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞";
        }
        addMessage("bot",response,getCurrentTime()),
        saveToHistory(t,response),
        updateAIStatus("–ì–æ—Ç–æ–≤")
    },l)
}

function insertQuickReply(e){
    document.getElementById("userInput").value=e,
    document.getElementById("userInput").focus()
}

document.addEventListener("DOMContentLoaded",function(){
    initDB(),
    cre
